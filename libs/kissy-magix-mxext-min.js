KISSY.add("magix/body",function(d,g,k,m){var e=k.has;var h=k.mix;var c={submit:1,focusin:1,focusout:1,mouseenter:1,mouseleave:1,mousewheel:1,change:1};var o=document.body;var n={};var i=k.cfg.tagName;var b="mx-handler";var f="mx-owner";var a="mx-ignore";var j={};var l=h({processEvent:function(v){var z=this;var w=v.target||v.srcElement;while(w&&w.nodeType!=1){w=w.parentNode;}var x=w;var p=v.type;var t=j[p]||(j[p]=new RegExp("(?:^|,)"+p+"(?:,|$)"));if(!t.test(w.getAttribute(a))){var A="mx"+p;var r;var y;var u=[];while(x&&x!=o){r=x.getAttribute(A);y=x.getAttribute(a);if(r||t.test(y)){break;}else{u.push(x);x=x.parentNode;}}if(r){var B=x.getAttribute(b)||x.getAttribute("mx-owner");if(!B){var q=x;while(q&&q!=o){if(q.tagName.toUpperCase()==i){x.setAttribute(b,B=q.id);break;}else{q=q.parentNode;}}}if(B){z.fire("event",{info:r,type:A,domEvent:v,target:w,current:x,handler:B});}else{throw new Error("miss mx-handler attribute:"+r);}}else{var s;var y;while(u.length){s=u.shift();y=s.getAttribute(a);if(!t.test(y)){y=y?y+","+p:p;s.setAttribute(a,y);}}}}},attachEvent:function(q){var r=this;if(!n[q]){n[q]=1;var p=c[q];if(p){r.delegateUnbubble(o,q);}else{o["on"+q]=function(s){s=s||window.event;s&&r.processEvent(s);};}}else{n[q]++;}},detachEvent:function(r){var s=this;var p=n[r];if(p>0){p--;if(!p){var q=c[r];if(q){s.undelegateUnbubble(o,r);}else{o["on"+r]=null;}delete n[r];}else{n[r]=p;}}}},m);return k.mix(l,g);},{requires:["magix/impl/body","magix/magix","magix/event"]});KISSY.add("magix/event",function(c,b){var e=function(f){return"~`"+f;};var d=b.safeExec;var a={fire:function(f,i,j,h){var o=e(f),m=this,l=m[o];if(l){if(!i){i={};}if(!i.type){i.type=f;}var k=l.length-1,g=k+1,n;while(g--){n=h?g:k-g;fn=l[n];if(fn.d){l.splice(n,1);k--;}if(d(fn,i,m)===false){break;}}}if(j){delete m[o];}},on:function(g,i,f){var h=e(g);if(!this[h]){this[h]=[];}if(b.isNumeric(f)){this[h].splice(f,0,i);}else{i.d=f;this[h].push(i);}},un:function(k,n){if(!b.isArray(k)){k=[k];}for(var f=0,h=k.length;f<h;f++){var m=e(k[f]),o=this[m];if(o){if(n){for(var l=0,g=o.length;l<g;l++){if(o[l]==n){o.splice(l,1);break;}}}else{delete this[m];}}}}};return a;},{requires:["magix/magix"]});KISSY.add("magix/impl/body",function(a){return{delegateUnbubble:function(d,b){var c=this;if(!c.$events){c.$events={};}d=a.one(d);d.delegate(b,"*[mx"+b+"]",c.$events[b]=function(f){c.processEvent(f);});},undelegateUnbubble:function(e,c){var d=this;var b=d.$events;if(b){e=a.one(e);e.undelegate(c,"*[mx"+c+"]",b[c]);delete b[c];}}};},{requires:["node"]});KISSY.add("magix/impl/magix",function(a){return{libRequire:function(c,d){var f=this;if(c){var b=f.isFunction(d);var e=f.isArray(c);a.use(e?c.join(","):c,b?function(g){d.apply(g,[].slice.call(arguments,1));}:f.noop);}else{d();}},libEnv:function(b){var n=this;var j=n.cfg;if(b){var g=[];var l=0;var q;var c=b.progress;if(c){var o=function(){var s=g.length;if(s){if(s>8){g.splice(0,2);}Magix.safeExec(c,g.shift(),j);setTimeout(o,15);}else{g.d=0;}};var d=function(s){if(s!=q){g.push(q=s);if(!g.d){g.d=setTimeout(o,15);}}};b.vomLoad=function(s){var t=Math.max(s,l);while(l<t){l+=Math.random()*0.05;d(l=Math.min(l,t));}l=t;};var i=a.getScript;a.getScript=function(){if(l<=0.95){l+=Math.random()*0.04;}else{if(l==1){a.getScript=i;g.s=1;}}d(l);i.apply(a,arguments);};}}else{var f=j.appHome||"./";var h=location;var r=h.protocol;var m=j.appName||"app";f=f.replace(new RegExp("(^|/)"+m+"/?$","i"),function(t,s){return s||"./";});if(!~f.indexOf(r)){f=n.path(h.href,f);}if(!a.endsWith(f,"/")){f+="/";}j.appHome=f;if(j.debug){j.debug=f.indexOf(r+"//"+h.host)==0;}if(j.debug&&Number(a.version)<1.3){var e=new RegExp("("+f+m+"/.+)-min\\.js(\\?[^?]+)?");a.config({map:[[e,"$1.js$2"]]});}var p="";if(j.debug){p=a.now();}else{p=j.appTag;}if(p){p+=".js";}var k=j.appCombine;if(a.isUndefined(k)){k=a.config("combine");}a.config({packages:[{name:j.appName=m,path:f,debug:j.debug,combine:k,tag:p}]});}},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isObject,isRegExp:a.isRegExp,isString:a.isString,isNumber:a.isNumber};});KISSY.add("magix/impl/router",function(a){return{useHistoryState:function(){var c=this,b=location.href;a.one(window).on("popstate",function(f){var d=location.href==b;if(!c.$firedPop&&d){return;}c.$firedPop=true;c.route();});},useLocationHash:function(){var b=this;a.one(window).on("hashchange",function(c){b.route();});}};},{requires:["node"]});KISSY.add("magix/impl/view",function(b,g,e,a){var d=function(){};var f={wrapAsyn:1,extend:1};var c=function(i,j,h){for(var k in j){if(b.isObject(j[k])){if(!a.has(i,k)){i[k]={};}c(i[k],j[k],true);}else{if(h){i[k]=j[k];}}}};d.extend=function(i,k){var j=this;var h=function(){h.superclass.constructor.apply(this,arguments);if(k){a.safeExec(k,arguments,this);}};h.extend=d.extend;return b.extend(h,j,i);};d.prepare=function(i){var k=this;if(!i.wrapAsyn){for(var l in k){if(a.has(f,l)){i[l]=k[l];}}var j=i.prototype;var m=i;var h;while(m.superclass){h=m.superclass.constructor;c(j,h.prototype);m=h;}}i.wrapAsyn();};a.mix(d.prototype,{getTmplByXHR:function(i,h){g({url:i,dataType:"html",success:function(j){h(j);},error:function(j,k){h(k);}});}});return d;},{requires:["ajax","sizzle","magix/magix"]});KISSY.add("magix/magix",function(h,b){var c=/\/\.\/|\/[^\/]+?\/\.{2}\/|([^:\/])\/\/+/;var g=/[^\/]*$/;var j=/[#?].*$/;var d="";var i=/([^=&?\/#]+)=([^&=#?]*)/g;var f="pathname";var e=/^https?:\/\//i;var p={};var l=function(q,r){if(!q){return false;}return Object.prototype.hasOwnProperty.call(q,r);};var o=function(s,r,t){for(var q in r){if(t===true){s[q]=r[q];}else{if(l(r,q)&&(!t||!l(t,q))){s[q]=r[q];}}}return s;};var a=function(u,q,t,s,v,w){if(!k.isArray(u)){u=[u];}if(!q||(!k.isArray(q)&&!q.callee)){q=[q];}for(s=0;s<u.length;s++){w=u[s];v=k.isFunction(w)&&w.apply(t,q);}return v;};var n=function(){throw new Error("unimplement method");};var m=function(){};var k={isNumeric:function(q){return !isNaN(parseFloat(q))&&isFinite(q);},mix:o,has:l,safeExec:a,noop:m,cfg:{debug:"%DEV%",tagName:"VFRAME"},locals:{},config:function(q){var s=this;var r=s.cfg;if(q){r=o(r,q);}return r;},start:function(r){var s=this;r=s.config(r);s.libEnv();if(r.ready){a(r.ready);delete r.ready;}var q=r.hasIniFile;var t=function(u){if(q!==false){s.libRequire(r.appName+"/ini",u);}else{u();}};t(function(u){s.cfg=o(r,u,r);var v={progress:s.cfg.progress,vomLoad:m};s.libEnv(v);s.libRequire(["magix/router","magix/vom"],function(x,w){x.on("locationChanged",function(y){if(y.slient){w.locationUpdated(y.loc);}else{if(y.changed.isView()){w.remountRoot(y);}else{w.locationChanged(y);}}});w.on("progress",function(y){v.vomLoad(y.percent);});s.libRequire(r.extensions,function(){x.start();});});});},keys:function(s){var q;if(Object.keys){q=Object.keys(s);}else{q=[];for(var r in s){if(l(s,r)){q.push(r);}}}return q;},local:function(r,u){var q=arguments;var s=this;var t=s.locals;if(q.length==0){return t;}else{if(q.length==1){if(s.isObject(r)){o(t,r);}else{return t[r];}}else{t[r]=u;}}},path:function(t,s){t=t.replace(j,d).replace(g,d);var r=d;if(s.charAt(0)=="/"){var u=t.indexOf("://");if(u==-1){r=s;}else{var q=t.indexOf("/",u+3);if(q==-1){r=t+s;}else{r=t.substring(0,q)+s;}}}else{r=t+s;}while(c.test(r)){r=r.replace(c,"$1/");}return r;},pathToObject:function(t){var q=this;var s={};var v={};var r=d;if(j.test(t)){r=t.replace(j,d);}else{if(!~t.indexOf("=")){r=t;}}if(r){if(e.test(r)){var u=r.indexOf("/",8);if(u==-1){r="/";}else{r=r.substring(u);}}}t.replace(i,function(x,w,y){v[w]=y;});s[f]=r;s.params=v;return s;},objectToPath:function(s){var q=s[f];var t=[];for(var r in s.params){if(l(s.params,r)){t.push(r+"="+s.params[r]);}}return q+(t.length?"?":d)+t.join("&");},tmpl:function(q,r){if(arguments.length==1){return p[q];}return p[q]=r;}};return k.mix(k,b);},{requires:["magix/impl/magix"]});KISSY.add("magix/router",function(e,f,a,x){var c=a.has;var o=a.mix;var n=document;var b=/^UTF-8$/i.test(n.charset||n.characterSet||"UTF-8");var p=a.cfg;var l=function(B){var z;var A=this.params;if(!a.isArray(B)){B=String(B).split(",");}for(var y=0;y<B.length;y++){z=c(A,B[y]);if(z){break;}}return z;};var j=function(){return c(this,d);};var m=function(){return c(this,"view");};var i=function(){var y=this;var A=y.hash;var z=y.query;return A[d]!=z[d];};var r=function(B){var y=this;var A=y.hash;var z=y.query;return A.params[B]!=z.params[B];};var t=function(y){var z=this;var A=z.hash;return c(A.params,y);};var k=function(y){var z=this;var A=z.query;return c(A.params,y);};var s=function(y){var z=this;var A=z.params;return A[y];};var u=a.safeExec;var h=window;var g=encodeURIComponent;var q=decodeURIComponent;var w="";var d="pathname";var v=o({qH:{},compareObject:function(C,B){var A=[];A=A.concat(a.keys(C));A=A.concat(a.keys(B));for(var z=0;z<A.length;z++){var y=A[z];if(C[y]!=B[y]){return false;}}return true;},getRoutes:function(){var A=this;if(A.$pnr){return A.$pnr;}var y={routes:p.routes||{}};var z=p.defaultView;if(!z){throw new Error("unset defaultView");}y.home=z;var B=p.defaultPathname||w;y.routes[B]=z;y[d]=B;y.nfView=p.notFoundView;return A.$pnr=y;},getViewPath:function(A){var z=this;var B=z.getRoutes();var y;if(!A){A=B[d];}if(a.isFunction(B.routes)){y=B.routes(A);}else{y=B.routes[A];}return{view:y?y:B.nfView||B.home,pathname:y?A:(B.nfView?A:B[d])};},start:function(){var y=this;if(y.supportState()){y.useHistoryState();}else{y.useLocationHash();}y.route();},supportState:function(){var y=h.history;return p.nativeHistory&&y.pushState&&y.replaceState;},parsePath:function(B){var A=a.pathToObject(B);var y=A[d];var z=this;if(y.charAt(0)!="/"&&p.nativeHistory&&!z.supportState()){A[d]=a.path(h.location[d],y);}return A;},parseQueryAndHash:function(z){z=z||h.location.href;var G=this;var y=G.qH;if(b){try{z=q(z);}catch(E){}}if(c(y,z)){return y[z];}var I;var B=z.replace(/^[^?#]+/g,function(J){I=G.parsePath(J)[d];return w;});var F=I+B.replace(/^([^#]+).*$/g,"$1");var C=B.replace(/^[^#]*#?!?/g,w);var A=G.parsePath(F);var D=G.parsePath(C);var H={};o(H,A.params);o(H,D.params);return y[z]={isPathnameDiff:i,isParamDiff:r,hashParamsOwn:t,queryParamsOwn:k,get:s,originalQuery:F,originalHash:C,query:A,hash:D,params:H};},parseLocation:function(z){var B=this;var A=B.parseQueryAndHash(z);var C;if(p.nativeHistory){if(A.hash[d]){C=A.hash[d];}else{C=A.query[d];}}else{C=A.hash[d];}var y=B.getViewPath(C);return o(A,y);},getChangedLocation:function(C,D){var y={params:{}};if(C[d]!=D[d]){y[d]=true;}if(C.view!=D.view){y.view=true;}var B=a.keys(C.params);B=B.concat(a.keys(D.params));for(var A=0;A<B.length;A++){var z=B[A];if(C.params[z]!==D.params[z]){y.params[z]=true;}}y.isParam=l;y.isPathname=j;y.isView=m;return y;},route:function(){var B=this;var y=B.parseLocation();var A=B.$lLoc||{params:{}};var C=!B.$lLoc;B.$lLoc=y;var D=A.view||w;var z;if(y.view==D){if(!B.compareLocation(A,y)){z=true;}}else{z=true;}if(z){B.$tLoc=y;var E=B.getChangedLocation(A,y);B.fire("locationChanged",{location:y,changed:E,firstFire:C});}},compareLocation:function(y,z){if(y[d]!=z[d]){return false;}return this.compareObject(y.params,z.params);},navigate2:function(D){var A=this;if(D&&a.isString(D)){var z=A.parsePath(D);if(z[d]){if(p.nativeHistory&&!A.supportState()){var B=A.$tLoc.query;if(B&&(B=B.params)){for(var C in B){if(c(B,C)&&!c(z.params,C)){z.params[C]=w;}}}}}else{var y=o({},A.$tLoc.params);y=o(y,z.params);z.params=y;z[d]=A.$tLoc[d];}if(!A.compareLocation(z,A.$tLoc)){A.$tLoc=z;var F=a.objectToPath(z);if(A.supportState()){A.$firedPop=true;history.pushState(new Date(),n.title,F);A.route();}else{var E=A.parseLocation(F);A.fire("locationChanged",{loc:E,slient:true});location.hash="#!"+F;}}}},navigate:function(B,A){if(a.isObject(B)){var y=[];for(var z in B){y.push(z+"="+(b?g(B[z]):B[z]));}B=y.join("&");if(A){B=A+"?"+B;}}this.navigate2(B);}},x);return a.mix(v,f);},{requires:["magix/impl/router","magix/magix","magix/event"]});KISSY.add("magix/vframe",function(f,c,s,n){var i=document;var p=0;var g=window;var d=g.CollectGarbage||c.noop;var q=c.safeExec;var l=c.mix;var j=c.cfg.tagName;var a="mx-view";var e=function(t){return typeof t=="object"?t:i.getElementById(t);};var h=function(u,t){return e(u).getElementsByTagName(t);};var m=function(t){return i.createElement(t);};m(j);var b="viewLoad";var o=function(v){var u=this;u.rC=0;u.rM={};u.parentAlter();var t=u.view;q(t.fire,"childrenAlter",t);u.unmountZoneVframes(0,v);};var k=/<script[^>]*>[\s\S]*?<\/script>/ig;var r=function(t){var u=this;u.id=r.idIt(t);u.vId=u.id+"_view";u.cS={};u.cC=0;u.view=null;u.rC=0;u.rM={};};l(r,{idIt:function(t){return t.id||(t.id="magix_vf_"+(p++));},create:function(u,v){u=e(u);var t=new r(u);l(t,v);return t;},createNode:function(v,u){var t=m(j);t.id=v;u.parentNode.insertBefore(t,u);}});l(r.prototype,s);l(r.prototype,{useAnimUpdate:function(){return false;},oldViewDestroy:c.noop,prepareNextView:c.noop,newViewCreated:c.noop,mountView:function(u,w){var y=this;var x=e(y.id);if(!x._dataBak){x._dataBak=1;x._dataTmpl=x.innerHTML.replace(k,"");}else{x._dataChged=1;}var t=y.$vN&&y.useAnimUpdate();y.unmountView(t,true);if(u){var z=c.pathToObject(u);var v=z.pathname;y.$vN=v;var A=function(D){if(v!=y.$vN){return;}n.prepare(D);var C;if(t){C=y.vId;y.prepareNextView();}else{C=y.id;}var B=new D({$:e,path:v,owner:y,ownerVOM:y.owner,id:C,vId:y.vId,vfId:y.id,location:y.owner.getLocation()});B.on("interact",function(F){y.fire(b,{view:B},y.vced=true);if(t){y.newViewCreated(true);}if(!F.tmpl){if(!t&&x._dataChged){x.innerHTML=x._dataTmpl;}y.mountZoneVframes();}B.on("rendered",function(){y.mountZoneVframes();});B.on("prerender",function(G){o.call(y,G.anim);});},0);y.view=B;var E=y.owner.getVframe(y.pId);if(E&&E.view){z.params.view=E.view;}B.load(l(z.params,w,true));};c.libRequire(v,A);}},unmountView:function(u,t){var w=this;var w=this;if(w.view){o.call(w,u);w.view.destroy();w.vced=false;var v=e(w.id);if(!u&&v._dataBak){v.innerHTML=v._dataTmpl;}if(u&&t){w.oldViewDestroy();}d();delete w.view;delete w.viewName;}else{if(w.viewName){w.un(b);delete w.viewName;}}},mountZoneVframes:function(x,t,C){var B=this;var v=B.owner;var w;if(!x){w=e(B.vId)||e(B.id);}else{w=e(x);}var D=h(w,j);var A=D.length;if(A){for(var z=0,y,u;z<A;z++){y=D[z];u=y.getAttribute(a);y=r.create(y,{owner:B.owner,pId:B.id});if(!c.has(B.cS,y.id)){B.cC++;}B.cS[y.id]=C;y.mountView(u,t);v.add(y);}}else{B.childrenCreated();}},unmountZoneVframes:function(t,v){var z=this;var y;if(t){y=h(t,j);}else{y=c.keys(z.cS);}var A,u;for(var x=0,w=y.length;x<w;x++){u=y[x];if(t){u=u.id;}if(u){A=z.owner.getVframe(u);A.unmountView(v);z.owner.remove(u);e(u).id="";delete z.cS[u];z.cC--;}}if(!t){z.cS={};z.cC=0;}},locationChanged:function(y){var A=this;var B=A.view;if(B&&B.sign){B.location=y.location;if(B.rendered){var C=B.olChanged(y);var z=l({prevent:function(){this.cs=[];},toChildViews:function(D){D=D||[];if(c.isString(D)){D=D.split(",");}this.cs=D;}},y);if(C){q(B.locationChange,z,B);}var x=z.cs||c.keys(A.cS);for(var v=0,u=x.length,t=A.owner,w;v<u;v++){w=t.getVframe(x[v]);if(w){w.locationChanged(y);}}}}},locationUpdated:function(z){var x=this;var u=x.view;if(u&&u.sign){u.location=z;var w=x.cS;var t;var v=x.owner;for(var y in w){if(c.has(w,y)){t=v.getVframe(y);if(t){t.locationUpdated(z);}}}}},childrenCreated:function(){var u=this;var t=u.view;if(t&&!u.fcc){u.fcc=1;t.fire("childrenCreated");u.fire("childrenCreated");}u.owner.childCreated();u.parentAlter(true);},parentAlter:function(x){var w=this;var u=w.pId;if(u){var v=w.owner.getVframe(u);if(x){if(!c.has(v.rM,w.id)){v.rM[w.id]=v.cS[w.id];v.rC++;if(v.rC==v.cC){delete v.fca;v.childrenCreated();}}}else{if(c.has(v.rM,w.id)){var t=v.rM[w.id];delete v.rM[w.id];v.rC--;if(!t&&!v.fca){v.fca=1;delete v.fcc;v.view.fire("childrenAlter");v.fire("childrenAlter");}if(!t){v.parentAlter(x);}}}}}});return r;},{requires:["magix/magix","magix/event","magix/view"]});KISSY.add("magix/view",function(h,p,d,s,m){var c=1;var r=d.safeExec;var e=d.has;var l=",";var i=[];var b=d.cfg;var k={render:1,renderUI:1,updateUI:1};var f="~~";var q=function(t){return function(){var v=this;var u;if(v.sign){v.sign++;v.fire("asyncall");u=t.apply(v,arguments);v.fire("asyncalled");}return u;};};var n=function(t){var u=this;d.mix(u,t);u.sign=1;};var a=n.prototype;d.mix(n,{idIt:function(t){return t.id||(t.id="magix_mxe_"+(c++));},wrapAsyn:function(){var u=this;if(!u[f]){u[f]=1;var x=u.prototype;var t;for(var w in x){t=x[w];var v=null;if(d.isFunction(t)&&t!=d.noop&&!t[f]&&e(k,w)){v=q(t);v[f]=t;x[w]=v;}}}}});var j=n.prototype;var g=window.CollectGarbage||d.noop;var o=/\smx[a-z]+\s*=/g;d.mix(j,s);d.mix(j,{render:d.noop,locationChange:d.noop,init:d.noop,hasTemplate:true,enableEvent:true,enableAnim:false,load:function(){var x=this;var t=x.hasTemplate;var v=arguments;var w=function(){x.delegateEvents();x.fire("interact",{tmpl:t},true);r(x.init,v,x);r(x.render,i,x);var y=!t&&!x.rendered;if(y){x.rendered=true;x.fire("created",null,true);}};if(t){var u=x.sign;x.getTemplate(function(y){if(u==x.sign){x.template=y;w();}});}else{w();}},updateViewId:function(){var t=this;if(t.$(t.vId)){t.id=t.vId;}else{t.id=t.vfId;}},beginUpdateHTML:function(){var v=this;if(v.sign){var w=v.rendered;if(w){var u=v.enableAnim;v.fire("prerender",{anim:u});var t=v.owner;if(u){r(t.oldViewDestroy,i,t);r(t.prepareNextView,i,t);v.updateViewId();}}}},endUpdateHTML:function(){var t=this;if(t.sign){if(t.rendered&&t.enableAnim){r(owner.newViewCreated,i,owner);}if(!t.rendered){t.fire("created",null,true);}t.rendered=true;t.fire("rendered");g();}},wrapMxEvent:function(t){return t?String(t).replace(o,' mx-owner="'+this.vfId+'"$&'):t;},setViewHTML:function(t){var u=this;u.beginUpdateHTML();u.$(u.id).innerHTML=u.wrapMxEvent(t);u.endUpdateHTML();},observeLocation:function(t){var u=this;if(!u.$loc){u.$loc={};}if(d.isString(t)){u.$loc.keys=t.split(l);}else{if(d.isArray(t)){u.$loc.keys=t;}else{if(d.isObject(t)){u.$loc.pn=t.pathname;u.observeLocation(t.keys);}}}},olChanged:function(x){var w=this;var t=w.$loc;var y=x.changed;if(t){var u=false;if(t.pn){u=y.isPathname();}if(!u){var v=t.keys;u=y.isParam(v);}return u;}return true;},destroy:function(){var t=this;t.fire("destroy",null,true,true);t.delegateEvents(true);t.sign=0;},getTemplate:function(v){var w=this;if(w.template){v(w.template);}else{var t=d.tmpl(w.path);if(t){v(t);}else{var u=b.debug;var y=".html";var x=b.appHome+w.path+y;if(u){x+="?_="+new Date().getTime()+y;}w.getTmplByXHR(x,function(z){v(d.tmpl(w.path,z));});}}},processEvent:function(A){var E=this;if(E.enableEvent&&E.sign){var B=A.target;var C=A.current;var w=A.info;var F=A.type;var z=A.domEvent;if(w){var H=w.split(":");var x=H.shift();var D=H[H.length-1];var v;if(D=="_halt_"||D=="_stop_"){if(z.stopPropagation){z.stopPropagation();}else{z.cancelBubble=true;}v=true;}if(D=="_halt_"||D=="_prevent_"){if(z.preventDefault){z.preventDefault();}else{z.returnValue=false;}v=true;}if(v){H.pop();}var u=n.idIt(C);var I=E.events;var G=I[z.type];for(var y=0,t;y<H.length;y++){t=H[y].lastIndexOf("@");if(t>-1){H[H[y].substring(t+1)]=H[y].substring(0,t);}}if(G[x]){r(G[x],{view:E,currentId:u,targetId:n.idIt(B),domEvent:z,events:I,params:H},G);}}}},delegateEvents:function(u){var w=this;var t=w.events;var v=u?m.detachEvent:m.attachEvent;for(var x in t){v.call(m,x);}},mountZoneViews:function(u,t,v){this.owner.mountZoneVframes(u,t,v!==false);},unmountZoneViews:function(t){this.owner.unmountZoneVframes(t);},mountView:function(v,x,y){var w=this;var u=w.ownerVOM;var t=u.getVframe(v);if(t){t.mountView(x,y);}return t;}});d.mix(n,p,{prototype:true});d.mix(n.prototype,p.prototype);return n;},{requires:["magix/impl/view","magix/magix","magix/event","magix/body"]});KISSY.add("magix/vom",function(f,i,j,p,o){var b=document;var c=j.safeExec;var l="magix_vf_root";var n=j.has;var g=0;var a=0;var k=0;var e=0;var d={};var h;var m=j.mix({add:function(q){if(!n(d,q.id)){g++;d[q.id]=q;m.fire("add",{vframe:q});}},getVframe:function(q){return d[q];},remove:function(q){var r=j.isString(q)?q:q.id;var q=d[r];if(q){g--;delete d[r];m.fire("remove",{vframe:q});}},childCreated:function(){if(!e){a++;var q=a/g;if(k<q){m.fire("progress",{percent:k=q});if(q==1){e=1;m.un("progress");}}}},getRoot:function(){var q=m.getVframe(l);if(!q){var r=b.getElementById(l);if(!r){i.createNode(l,b.body.firstChild);}q=i.create(l,{owner:m});m.add(q);}return q;},remountRoot:function(r){var q=m.getRoot();h=r.location;q.mountView(h.view);},locationChanged:function(r){h=r.location;var q=m.getRoot();q.locationChanged(r);},locationUpdated:function(r){h=r;var q=m.getRoot();q.locationUpdated(r);},getLocation:function(){return h;}},p);o.on("event",function(r){var q=m.getVframe(r.handler);if(q&&q.view){q.view.processEvent(r);}});return m;},{requires:["magix/vframe","magix/magix","magix/event","magix/body"]});KISSY.add("mxext/mmanager",function(f,i){var g=i.has;var a=i.safeExec;var k=function(p){if(!i.isArray(p)){p=[p];}for(var o=0,n;o<p.length;o++){n=p[o];delete n.cacheKey;}return p;};var b=function(m){var n=this;n.$modelClass=m;};var h=Array.prototype.slice;var l={urlParams:1,postParams:1,cacheKey:1,cacheTime:1,before:1,after:1};var j=function(o){var m={};for(var n in o){if(!l[n]){m[n]=o[n];}}return m;};var e=function(o,n){var m=h.call(arguments,2);return function(){return o.apply(n,m.concat(h.call(arguments)));};};i.mix(b,{create:function(m){var n=this;if(!m){throw new Error("MManager.create modelClass ungiven");}return new b(m);}});var d={ALL:1,ANY:2,ONE:4};var c=function(m){this.$host=m;this.$task=false;};i.mix(c.prototype,{create:function(m){var q=this;var v=q.$host;if(f.isString(m)){m={name:m};}var u=v[m.name];if(!u){throw new Error("Not found:"+m.name);}var p=m.cacheKey||u.cacheKey;var n;var r=m.cacheTime||u.cacheTime||0;if(!v.$modelsCache){v.$modelsCache={};}var t=v.$modelsCache;var s=m.metaParams||[];var o;if(p&&g(t,p)){n=t[p];if(r>0){if(f.now()-n._doneAt>r){delete t[p];o=true;}}}else{n=new v.$modelClass(j(u));n._after=u.after;n._cacheKey=p;n._meta=u;o=true;}n.metaParams=s;if(o){n.reset();n.set(j(m));n.setUrlParams(u.urlParams);n.setPostParams(u.postParams);n.setUrlParams(m.urlParams);n.setPostParams(m.postParams);if(f.isFunction(u.before)){a(u.before,[n].concat(s),u);}}return{entity:n,needUpdate:o};},fetchModels:function(E,v,y,p,z){var F=this;if(F.$task){F.next(function(H){H.fetchModels(E,v,y,p,z);});return F;}F.$task=true;var u=F.$host;if(!u.$modelsCache){u.$modelsCache={};}if(!u.$modelsCacheKeys){u.$modelsCacheKeys={};}if(!F.$reqModels){F.$reqModels={};}var q=u.$modelsCache;var w=u.$modelsCacheKeys;var r=F.$reqModels;if(!i.isArray(E)){E=[E];}var G=E.length;var x=0;var m;var D=[];var B;var t=function(P,O,J,M){if(F.$destroy){return;}x++;delete r[J.id];var L=J._cacheKey;var I;var K;if(O){m=M||"fetch data error @ mxext/mmanager line 199";if(z==d.ONE){J.set("msg",m);if(y){I=a(y,J);}K=false;}}else{B=true;D[P]=J;if(L&&!g(q,L)){q[L]=J;}var N=J.metaParams;J._doneAt=f.now();if(J._after){a(J._after,[J].concat(N),J._meta);}if(z==d.ONE){if(v){I=a(v,J);}K=true;}}if(L&&g(w,L)){var Q=w[L];delete w[L];a(Q,[O,J,M],J);}if(x>=G){if(z!=d.ONE){var H=m?y:v;var M=m?[m]:D;K=!m;if(z==d.ANY){H=B?v:y;M=B?D:[m];K=B;}I=a(H,M,F);}F.$ntId=setTimeout(function(){F.$task=false;F.doNext(I,K);},30);}if(p){a(p,{total:G,current:x,error:m});}};for(var A=0,n;A<E.length;A++){n=E[A];var o=n.cacheKey;var C,s;if(o&&g(w,o)){w[o].push(e(t,F,A));}else{s=F.create(n);C=s.entity;if(s.needUpdate){r[C.id]=C;if(o){w[o]=[];}C.request({success:e(t,C,A,false,C),error:e(t,C,A,true,C)});}else{t(A,false,C);}}}return F;},fetchAll:function(p,m,o,n){return this.fetchModels(p,m,o,n,d.ALL);},saveAll:function(p,m,o,n){p=k(p);return this.fetchModels(p,m,o,n,d.ALL);},saveAny:function(p,m,o,n){p=k(p);return this.reqModels(p,m,o,n,d.ANY);},fetchAny:function(p,m,o,n){return this.reqModels(p,m,o,n,d.ANY);},saveOne:function(p,o,n,m){p=k(p);return this.reqModels(p,o,n,m,d.ONE);},fetchOne:function(p,o,n,m){return this.fetchModels(p,o,n,m,d.ONE);},abort:function(){var s=this;clearTimeout(s.$ntId);var r=s.$host;var o=s.$reqModels;var v=r.$modelsCacheKeys;if(o){for(var t in o){var n=o[t];var u=n._cacheKey;if(u&&g(v,u)){var q=v[u];delete v[u];a(q,[true,n,"aborted"],n);}n.abort();}}s.$reqModels={};s.$queue=[];s.$task=false;},next:function(n){var o=this;if(!o.$queue){o.$queue=[];}o.$queue.push(n);if(!o.$task){var m=o.$latest||[null,true];o.doNext.apply(o,m);}return o;},doNext:function(q,n){var p=this;var m=p.$queue;if(m){var o=m.shift();if(o){a(o,[p,q,n],p);}}p.$latest=[q,n];},destroy:function(){var m=this;m.$destroy=true;m.abort();}});i.mix(b.prototype,{registerModels:function(p){var o=this;if(!i.isArray(p)){p=[p];}for(var n=0,m;n<p.length;n++){m=p[n];if(!m.name){throw new Error("model must own a name attribute");}o[m.name]=m;}},registerMethods:function(m){var n=this;for(var o in m){if(g(m,o)){n[o]=(function(p){return function(){var v;var t=arguments;var r=[];for(var u=0,s;u<t.length;u++){s=t[u];if(i.isFunction(s)){r.push((function(w){return function(){if(v){return;}w.apply(w,arguments);};}(s)));}else{r.push(s);}}var q=p.apply(n,r);return{abort:function(){if(q&&q.abort){a(q.abort,["aborted"],q);}v=true;}};};}(m[o]));}}},callMethods:function(u,q,w){var v=this,o=[],t="",y=u.length,p=0,m,z=function(C,A,B){if(m){return;}p++;if(B){t=C;}else{o[A]=C;}if(y<=p){if(!t){if(f.isFunction(q)){q.apply(q,o);}}else{if(f.isFunction(w)){w(t);}}}},n=function(A,B){return function(C){z(C,A,!B);};};for(var r=0,s;r<u.length;r++){s=u[r];var x;if(f.isFunction(s.name)){x=s.name;}else{x=v[s.name];}if(x){if(!s.params){s.params=[];}if(!f.isArray(s.params)){s.params=[s.params];}s.params.push(n(r,true),n(r));x.apply(v,s.params);}else{z("unfound:"+s.name,r,true);}}return{abort:function(){m=true;}};},saveAll:function(p,m,o,n){return new c(this).saveAll(p,m,o,n);},fetchAll:function(p,m,o,n){return new c(this).fetchAll(p,m,o,n);},saveAny:function(p,m,o,n){return new c(this).saveAny(p,m,o,n);},fetchAny:function(p,m,o,n){return new c(this).fetchAny(p,m,o,n);},saveOne:function(p,o,n,m){return new c(this).saveOne(p,o,n,m);},fetchOne:function(p,o,n,m){return new c(this).fetchOne(p,o,n,m);},clearCacheByKey:function(m){var n=this;var q=n.$modelsCache;if(q){if(f.isString(m)){if(g(q,m)){delete q[m];}}else{if(f.isRegExp(m)){for(var o in q){if(m.test(o)){delete modelClass[o];}}}}}},clearCacheByName:function(o){var q=this;var t=q.$modelsCache;var u;if(f.isRegExp(o)){u=function(m){return o.test(m);};}else{u=function(m){return m==o;};}if(t){for(var s in t){var n=t[s];var r=n._meta;if(u(r.name)){delete t[s];}}}},getModelUrl:function(m){var n=this;var o;if(f.isString(m)){o=n[m];}else{o=m;}return n.$modelClass.prototype.url(o.uri);}});return b;},{requires:["magix/magix"]});KISSY.add("mxext/model",function(c,a){var d=function(g,h,f){for(var i in h){if(c.isObject(h[i])){if(!a.has(g,i)){g[i]={};}d(g[i],h[i],true);}else{if(f){g[i]=h[i];}}}};var e=function(f){if(f){this.set(f);}this.id=c.guid("m");};var b=function(g,h){var f=function(){f.superclass.constructor.apply(this,arguments);if(h){a.safeExec(h,[],this);}};a.mix(f,this,{prototype:true});d(g,this.prototype);return c.extend(f,this,g);};a.mix(e,{GET:"GET",POST:"POST",extend:b});a.mix(e.prototype,{urlMap:{},sync:a.noop,parse:a.noop,getParamsObject:function(f){if(!f){f=e.GET;}return this["$"+f]||null;},getUrlParamsObject:function(){return this.getParamsObject(e.GET);},getPostParamsObject:function(){return this.getParamsObject(e.POST);},getPostParams:function(){return this.getParams(e.POST);},getUrlParams:function(){return this.getParams(e.GET);},getParams:function(l){var m=this;if(!l){l=e.GET;}else{l=l.toUpperCase();}var h="$"+l;var o=m[h];var f=[];var g;if(o){for(var n in o){g=o[n];if(c.isArray(g)){for(var j=0;j<g.length;j++){f.push(n+"="+encodeURIComponent(g[j]));}}else{f.push(n+"="+encodeURIComponent(g));}}}return f.join("&");},setUrlParamsIf:function(g,f){this.setParams(g,f,e.GET,true);},setPostParamsIf:function(h,g){var f=this;f.setParams(h,g,e.POST,true);},setParams:function(m,l,h,g){if(!h){h=e.GET;}else{h=h.toUpperCase();}var i=this;if(!i.$keysCache){i.$keysCache={};}i.$keysCache[h]=true;var f="$"+h;if(!i[f]){i[f]={};}if(c.isObject(m)){for(var j in m){if(!g||!i[f][j]){i[f][j]=m[j];}}}else{if(m&&l){if(!g||!i[f][m]){i[f][m]=l;}}}},setPostParams:function(h,g){var f=this;f.setParams(h,g,e.POST);},setUrlParams:function(g,f){this.setParams(g,f,e.GET);},removeParamsObject:function(f){if(!f){f=e.GET;}delete this["$"+f];},removePostParamsObject:function(){this.removeParamsObject(e.POST);},removeUrlParamsObject:function(){this.removeParamsObject(e.GET);},reset:function(){var k=this;var h=k.$keysCache;if(h){for(var l in h){if(a.has(h,l)){delete k["$"+l];}}delete k.$keysCache;}var j=k.$keys;var f=k.$attrs;if(j){for(var g=0;g<j.length;g++){delete f[j[g]];}delete k.$keys;}},url:function(k){var g=this,n=k||g.get("uri"),f;if(n){f=n.split(":");var o=g.urlMap;if(o){for(var l=0,m=o,h=f.length;l<h;l++){m=m[f[l]];if(m===undefined){break;}else{if(l==h-1){n=m;}}}}}else{throw new Error("model not set uri");}return n;},get:function(g){var h=this;var f=h.$attrs;if(f){return f[g];}return null;},set:function(f,j,i){var g=this;if(!g.$attrs){g.$attrs={};}if(i&&!g.$keys){g.$keys=[];}if(c.isObject(f)){for(var h in f){if(i){g.$keys.push(h);}g.$attrs[h]=f[h];}}else{if(f){if(i){g.$keys.push(f);}g.$attrs[f]=j;}}},load:function(f){this.request(f);},save:function(f){this.request(f);},request:function(g){if(!g){g={};}var i=g.success;var f=g.error;var h=this;h.$abort=false;g.success=function(k){if(!h.$abort){if(k){var j=h.parse(k);if(j){if(c.isArray(j)){j={list:j};}h.set(j,null,true);}}if(i){i.apply(this,arguments);}}};g.error=function(){if(!h.$abort){if(f){f.apply(this,arguments);}}};h.$trans=h.sync(g);},abort:function(){var f=this;if(f.$trans&&f.$trans.abort){f.$trans.abort();}delete f.$trans;f.$abort=true;},beginTransaction:function(){var f=this;f.$bakAttrs=c.clone(f.$attrs);},rollbackTransaction:function(){var f=this;var g=f.$bakAttrs;if(g){f.$attrs=g;delete f.$bakAttrs;}},endTransaction:function(){delete this.$bakAttrs;}});return e;},{requires:["magix/magix"]});KISSY.add("mxext/view",function(i,d,g,n){var e=window;var m=",";var l="destroy,abort,stop,cancel,remove".split(m);var k=0;var a=Magix.safeExec;var j=Magix.has;var f;var c={};var b=function(p){if(!b.d){b.d=1;p.on("add",function(t){var q=t.vframe;var s=c[q.id];if(s){for(var r=0;r<s.length;r++){h(q,s[r]);}delete c[q.id];}});p.on("remove",function(q){delete c[q.vframe.id];});var o=p.buildRoot();o.on("childrenCreated",function(){c={};});}};var h=function(q,p){var o=q.view;if(o&&q.vced){a(o.receiveMessage,p,o);}else{q.on("viewLoad",function(r){a(r.view.receiveMessage,p,r.view);});}};return d.extend({queryEvents:null,navigate:function(o){g.navigate(o);},attachQueryEvents:function(){var s=this;var o=s.queryEvents;if(o){s.$queryEventsCache={};for(var u in o){var r=o[u];for(var t in r){i.all("#"+s.id+" "+t).on(u,s.$queryEventsCache[u+"_"+t]=(function(p){return function(w){if(s.enableEvent){var v=d.idIt(w.target);var q=d.idIt(w.currentTarget);Magix.safeExec(p,{view:s,targetId:v,currentId:q,queryEvents:o,domEvent:w},o);}};}(r[t])));}}}},detachQueryEvents:function(){var s=this;var o=s.queryEvents;if(o){for(var u in o){var r=o[u];for(var t in r){i.all("#"+s.id+" "+t).detach(u,s.$queryEventsCache[u+"_"+t]);}}delete s.$queryEventsCache;}},setData:function(o){this.data=this.wrapMustachData(o);},wrapMustachData:function(s){var o=this,q=this.renderer,p,r;if(q){for(p in q){for(r in q[p]){(function(){var v=p,u=r;var t=q[v][u];s[v+"_"+u]=function(){return t.call(this,o,v);};})();}}}return s;},manage:function(s,r){var t=this;var q=arguments;var p=true;if(q.length==1){r=s;s="res_"+(k++);p=false;}if(!t.$resCache){t.$resCache={};}var o={hasKey:p,res:r};t.$resCache[s]=o;return r;},getManaged:function(r){var s=this;var q=s.$resCache;var p=s.sign;if(q&&j(q,r)){var o=q[r];var t=o.res;return t;}return null;},removeManaged:function(t){var r=this,q=null;var o=r.$resCache;if(o){if(j(o,t)){q=o[t].res;delete o[t];}else{for(var s in o){if(o[s].res===t){q=o[s].res;delete o[s];break;}}}}return q;},destroyManaged:function(w){var t=this;var q=t.$resCache;if(q){for(var u in q){var v=q[u];var s=v.res;if(Magix.isNumber(s)){e.clearTimeout(s);e.clearInterval(s);}else{if(s){if(s.nodeType&&s.parentNode){i.one(s).remove();}else{for(var r=0;r<l.length;r++){if(Magix.isFunction(s[l[r]])){a(s[l[r]],[],s);}}}}}if(w&&!v.hasKey){delete q[u];}}if(!w){delete t.$resCache;}}},destroyAsyncall:function(){var s=this;var q=s.$resCache;if(q){for(var t in q){var u=q[t];var r=u.res;if(r.fetchOne&&r.fetchAll){r.destroy();delete q[t];}else{if(Magix.isNumber(r)){e.clearTimeout(r);e.clearInterval(r);delete q[t];}}}}},receiveMessage:Magix.noop,postMessageTo:function(t,q){var p=this.ownerVOM;b(p);if(!Magix.isArray(t)){t=[t];}if(!q){q={};}for(var r=0,s;r<t.length;r++){s=t[r];var o=p.get(s);if(o){h(o,q);}else{if(!c[s]){c[s]=[];}c[s].push(q);}}},setViewPagelet:function(t,r){var s=this;var o=s.sign;var q=function(u){if(f){u(f);}else{i.use("brix/core/pagelet",function(v,w){u(f=w);});}};var p=s.getManaged("pagelet");if(p){p.ready(function(){p.setChunkData(t);});}else{q(function(u){if(o==s.sign){i.one("#"+s.id).html("");s.beginUpdateHTML();p=new u({container:"#"+s.id,tmpl:s.wrapMxEvent(s.template),data:s.wrapMustachData(t),destroyAction:"empty"});s.endUpdateHTML();s.manage("pagelet",p);if(r){p.on("beforeRefreshTmpl",function(v){s.unmountZoneViews(v.node[0]);});p.ready(function(){if(o==s.sign){r.call(s,p);}});}}});}}},function(){var o=this;o.vm=new n();o.on("interact",function(){o.on("asyncall",function(){o.destroyAsyncall();});o.on("prerender",function(){o.destroyManaged(true);o.detachQueryEvents();});o.on("rendered",function(){o.attachQueryEvents();});o.on("destroy",function(){o.destroyManaged();});});});},{requires:["magix/view","magix/router","mxext/viewmodel"]});KISSY.add("mxext/viewmodel",function(b){var a=function(c){a.superclass.constructor.call(this,c);this.addAttrs(c);};b.extend(a,b.Base,{registerDataKey:function(e){var d={};for(var c=0;c<e.length;c++){d[e[c]]={};}this.addAttrs(d);},registerHelpers:function(e){var c=this.constructor.superclass.set;for(var d in e){c.call(this,d,e[d],{slient:true});}},toJSON:function(){return this.getAttrVals();},set:function(c,f,e){var g=c;if(!b.isPlainObject(g)){g={};g[c]=f;}for(var d in g){if(!this.hasAttr(d)){throw Error("The DataKey: '"+d+"' has not been registed in current ViewModel!");}}return this.constructor.superclass.set.call(this,c,f,e);}});return a;},{requires:["base"]});(function(a){var c=function(){};if(!a.console){a.console={log:c,warn:c,error:c,debug:c};}var b;if(!a.Magix){a.Magix={start:function(d){b=d;}};KISSY.use("magix/magix",function(d,e){a.Magix=e;if(b){e.start(b);}});}})(this);